[unix_http_server]
file=/var/run/supervisor.sock   ; (the path to the socket file)
chmod=0700                      ; socket file mode (default 0700)

[supervisord]
logfile=/var/log/supervisor/supervisord.log ; main log file;default $CWD/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10                          ; main logfile backups; 0 means none, default 10
loglevel=info                               ; log level; default info; others: debug,warn,trace
pidfile=/var/run/supervisord.pid            ; supervisord pidfile;default supervisord.pid
childlogdir=/var/log/supervisor             ; 'AUTO' child log dir, default $TEMP
nodaemon=true                              ; start in foreground if true; default false
minfds=1024                                 ; min. avail startup file descriptors; default 1024
minprocs=200                                ; min. avail process descriptors;default 200

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL for a unix socket


[program:redis]
command=/root/redis/bin/redis-server /root/redis/redis.conf
process_name=%(program_name)s
numprocs=1                                                 ; number of processes copies to start (def 1)
autostart=true                                             ; start at supervisord start (default: true)
startretries=3                                             ; max # of serial start failures when starting (default 3)
autorestart=unexpected                                     ; 子进程结束后重启策略,false:不重启; true:重启; unexpected:当进程退出码不在exitcodes里面时才重启
exitcodes=0,2                                              ; 对应autorestart=unexpected,exitcodes里面定义的退出码是expected,os._exit(N),N就是退出码
redirect_stderr=true                                       ; redirect proc stderr to stdout (default false)
stdout_logfile=/var/log/supervisor/%(program_name)s.log    ; 只能捕获各进程输出到控制台的信息(eg: "logfile /usr/log"则无法获取)
stdout_logfile_maxbytes=16MB                               ; max # logfile bytes b4 rotation (default 50MB)
stdout_logfile_backups=10                                  ; # of stdout logfile backups (0 means none, default 10)

[program:mysql]
command=mysqld --defaults-file=/etc/mysql/mysql.conf.d/mysqld.cnf
process_name=%(program_name)s
numprocs=1
autostart=true
startretries=3
autorestart=unexpected
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=8MB
stdout_logfile_backups=1

[program:redis_cluster7000]
command=/root/redis/bin/redis-server /root/redis_cluster/7000/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[program:redis_cluster7001]
command=/root/redis/bin/redis-server /root/redis_cluster/7001/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[program:redis_cluster7002]
command=/root/redis/bin/redis-server /root/redis_cluster/7002/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[program:redis_cluster7003]
command=/root/redis/bin/redis-server /root/redis_cluster/7003/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[program:redis_cluster7004]
command=/root/redis/bin/redis-server /root/redis_cluster/7004/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[program:redis_cluster7005]
command=/root/redis/bin/redis-server /root/redis_cluster/7005/redis.conf --daemonize no
numprocs=1
autostart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/supervisor/%(program_name)s.log
stdout_logfile_maxbytes=16MB
stdout_logfile_backups=1

[group:rc]
programs=redis_cluster7000,redis_cluster7001,redis_cluster7002,redis_cluster7003,redis_cluster7004,redis_cluster7005

